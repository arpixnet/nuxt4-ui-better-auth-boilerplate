# Internationalization (i18n) Documentation

Complete guide for managing multi-language support in the boilerplate using [@nuxtjs/i18n](https://i18n.nuxtjs.org/).

---

## Table of Contents

- [Overview](#overview)
- [Configuration](#configuration)
- [Adding New Languages](#adding-new-languages)
- [Translation Files](#translation-files)
- [Usage in Components](#usage-in-components)
- [Usage in Composables](#usage-in-composables)
- [Language Switcher](#language-switcher)
- [SEO and i18n](#seo-and-i18n)
- [Best Practices](#best-practices)

---

## Overview

The boilerplate comes pre-configured with internationalization support for **Spanish** and **English**. The i18n module uses a `no_prefix` strategy, meaning the language is detected from the browser and stored in a cookie, without modifying the URL.

### Supported Languages

| Code | Language | Flag | File |
|------|----------|------|------|
| `es` | EspaÃ±ol | ðŸ‡ªðŸ‡¸ | `i18n/locales/es.json` |
| `en` | English | ðŸ‡¬ðŸ‡§ | `i18n/locales/en.json` |

---

## Configuration

The i18n configuration is in `nuxt.config.ts`:

```typescript
i18n: {
  baseUrl: process.env.BASE_URL || 'http://localhost:3000',

  locales: [
    {
      code: 'es',
      language: 'es-ES',
      file: 'es.json',
      flag: 'ðŸ‡ªðŸ‡¸',
      name: 'EspaÃ±ol',
      shortName: 'ES'
    },
    {
      code: 'en',
      language: 'en-US',
      file: 'en.json',
      flag: 'ðŸ‡¬ðŸ‡§',
      name: 'English',
      shortName: 'EN'
    }
  ],

  defaultLocale: 'en',

  strategy: 'no_prefix',  // Language stored in cookie, not in URL

  detectBrowserLanguage: {
    useCookie: true,
    cookieKey: 'i18n_redirected',
    redirectOn: 'root',
    alwaysRedirect: false,
    cookieCrossOrigin: process.env.NODE_ENV === 'production'
  }
}
```

### Strategy: `no_prefix`

The `no_prefix` strategy means:
- URLs remain the same regardless of language (e.g., `/about` not `/es/about`)
- Language is detected from browser settings and stored in a cookie
- Cleaner URLs but less SEO-friendly for multi-language sites

For SEO-optimized multi-language sites, consider changing to `prefix_except_default`:

```typescript
strategy: 'prefix_except_default'  // /, /es, /fr, etc.
```

---

## Adding New Languages

### Step 1: Create Translation File

Create a new JSON file in `i18n/locales/`:

```json
// i18n/locales/fr.json
{
  "welcome": "Bienvenue",
  "description": "Ceci est une application Nuxt 4",
  "auth": {
    "login": {
      "title": "Connexion",
      "subtitle": "Connectez-vous pour continuer",
      "email": "Adresse email",
      "password": "Mot de passe"
    }
  }
}
```

### Step 2: Add to Configuration

Add the new locale to `nuxt.config.ts`:

```typescript
i18n: {
  locales: [
    { code: 'es', language: 'es-ES', file: 'es.json', flag: 'ðŸ‡ªðŸ‡¸', name: 'EspaÃ±ol', shortName: 'ES' },
    { code: 'en', language: 'en-US', file: 'en.json', flag: 'ðŸ‡¬ðŸ‡§', name: 'English', shortName: 'EN' },
    { code: 'fr', language: 'fr-FR', file: 'fr.json', flag: 'ðŸ‡«ðŸ‡·', name: 'FranÃ§ais', shortName: 'FR' }
  ],
}
```

### Step 3: Update Language Selector

The `languageSelector` component will automatically detect the new language.

---

## Translation Files

### Structure

Translation files are organized by feature:

```json
{
  "common": {
    "welcome": "Welcome",
    "loading": "Loading...",
    "error": "An error occurred"
  },
  "auth": {
    "login": {
      "title": "Welcome Back",
      "subtitle": "Log in to continue your application journey",
      "email": "Email address",
      "password": "Password",
      "forgotPassword": "Forgot password?",
      "noAccount": "Don't have an account?",
      "signUp": "Sign up"
    },
    "register": {
      "title": "Create Account",
      "subtitle": "Join us to get started with your application"
    }
  },
  "nav": {
    "home": "Home",
    "dashboard": "Dashboard",
    "profile": "Profile",
    "logout": "Logout"
  }
}
```

### Accessing Nested Keys

```vue
<template>
  <!-- Nested access with dot notation -->
  <h1>{{ $t('auth.login.title') }}</h1>
  <p>{{ $t('auth.login.subtitle') }}</p>
</template>
```

### Pluralization

```json
{
  "items": "no items | one item | {count} items"
}
```

```vue
<template>
  <p>{{ $tn('items', itemsCount) }}</p>
</template>
```

### Date/Time Formatting

```json
{
  "shortDate": "DD/MM/YYYY",
  "longDate": "MMMM D, YYYY"
}
```

---

## Usage in Components

### Using `$t()` in Templates

```vue
<template>
  <div>
    <h1>{{ $t('welcome') }}</h1>
    <p>{{ $t('auth.login.subtitle') }}</p>

    <!-- With interpolation -->
    <p>{{ $t('greeting', { name: userName }) }}</p>
    <!-- Translation: "Hello, {name}" -> "Hello, John" -->
  </div>
</template>

<script setup lang="ts">
const userName = ref('John')
</script>
```

### Using `useI18n()` Composable

```vue
<script setup lang="ts">
const { t, locale, setLocale, locales } = useI18n()

// Get current locale
console.log(locale.value) // 'en'

// Get all available locales
console.log(locales.value) // [{ code: 'es', ... }, { code: 'en', ... }]

// Translate programmatically
const message = t('welcome')

// Change language
const changeLanguage = (lang: string) => {
  setLocale(lang)
}

// Check if language is RTL
const { rtl } = useI18n()
console.log(rtl.value) // false for LTR languages
</script>
```

### Reactive Language Changes

```vue
<script setup lang="ts">
const { locale, t } = useI18n()

// Watch for language changes
watch(locale, (newLocale) => {
  console.log(`Language changed to: ${newLocale}`)
  // Fetch content in new language, etc.
})
</script>
```

---

## Usage in Composables

When using translations inside composables (outside of Vue components):

```typescript
// composables/useMyFeature.ts
export const useMyFeature = () => {
  const { t, locale } = useI18n()

  const getMessage = () => {
    return t('common.welcome')
  }

  const getCurrentLocale = () => {
    return locale.value
  }

  return {
    getMessage,
    getCurrentLocale
  }
}
```

---

## Language Switcher

The boilerplate includes a language selector component at `app/components/layout/languageSelector.vue`.

### Usage in Layout

```vue
<template>
  <div>
    <AppHeader />
    <LayoutLanguageSelector />
    <slot />
  </div>
</template>
```

### Custom Language Switcher

Create your own language switcher:

```vue
<template>
  <USelect
    v-model="currentLocale"
    :options="localeOptions"
    value-attribute="code"
    option-attribute="name"
    @change="setLocale(currentLocale)"
  />
</template>

<script setup lang="ts">
const { locale, locales, setLocale } = useI18n()

const currentLocale = computed({
  get: () => locale.value,
  set: (value) => setLocale(value)
})

const localeOptions = computed(() => {
  return locales.value.map((loc) => ({
    code: loc.code,
    name: loc.flag + ' ' + loc.name
  }))
})
</script>
```

---

## SEO and i18n

### Meta Tags

The i18n module automatically adds `hreflang` tags for SEO. Configure in `nuxt.config.ts`:

```typescript
i18n: {
  baseUrl: 'https://yourdomain.com',
  // ... locales config
}
```

This generates:

```html
<link rel="alternate" hreflang="es" href="https://yourdomain.com/" />
<link rel="alternate" hreflang="en" href="https://yourdomain.com/" />
<link rel="alternate" hreflang="x-default" href="https://yourdomain.com/" />
```

### Sitemap

The i18n module integrates with `@nuxtjs/seo` for multi-language sitemaps.

---

## Best Practices

### 1. Keep Translations Organized

Group translations by feature:

```json
{
  "auth": { ... },
  "dashboard": { ... },
  "settings": { ... }
}
```

### 2. Use Keys, Not Content

```json
// âœ… Good
{
  "auth.login.title": "Welcome Back"
}

// âŒ Avoid
{
  "This is the login page title that says Welcome Back": "Welcome Back"
}
```

### 3. Provide Context for Translators

```json
{
  "login_button": "Login",  // Button on the login form
  "login_title": "Welcome Back"  // Heading on login page
}
```

### 4. Handle Missing Translations

```typescript
const missingHandler = (locale: string, key: string) => {
  console.warn(`Missing translation: ${key} for locale: ${locale}`)
  return key // Return the key itself
}
```

### 5. Test All Languages

Before deploying, test all pages in all supported languages to ensure:
- All text is translated
- Layouts handle different text lengths (German is longer than English)
- Date/number formats are correct

---

## Advanced Features

### Lazy Loading Translations

For large translation files, load them on demand:

```typescript
i18n: {
  lazy: true,
  langDir: 'i18n/locales/',
  locales: [
    { code: 'en', file: 'en.ts', isCatchallLocale: true },
    { code: 'es', file: 'es.ts' }
  ]
}
```

### Different Domain per Language

```typescript
i18n: {
  differentDomains: true,
  locales: [
    {
      code: 'es',
      domain: 'es.yourdomain.com'
    },
    {
      code: 'en',
      domain: 'en.yourdomain.com'
    }
  ]
}
```

### Type-Safe Translations

Generate TypeScript types for your translations:

```bash
pnpm nuxi module:generate i18n
```

This creates types for autocomplete support:

```typescript
const { t } = useI18n()
t('auth.login.title') // Autocomplete for keys
```

---

## Troubleshooting

### Translations Not Updating

Clear the Nuxt cache:

```bash
rm -rf .nuxt
pnpm dev
```

### Language Not Persisting

Check that cookies are enabled in the browser and that the cookie configuration is correct.

### Missing Translations in Production

Ensure all translation files are included in your build by checking the `i18n/locales/` directory structure.

---

## References

- [@nuxtjs/i18n Documentation](https://i18n.nuxtjs.org/)
- [Vue I18n Documentation](https://vue-i18n.intlify.dev/)
- [Nuxt SEO Documentation](https://nuxtseo.com/)
